<svg viewBox="0 0 1200 1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="1000" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="600" y="40" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    System Block Diagram - Complete ML Workflow
  </text>
  <text x="600" y="70" font-size="16" text-anchor="middle" fill="#7f8c8d">
    From Sensor Input to Buzzer Alert
  </text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#3498DB"/>
    </marker>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#27AE60"/>
    </marker>
    <marker id="arrowred" markerWidth="10" marrowHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#E74C3C"/>
    </marker>
  </defs>
  
  <!-- Block 1: Ultrasonic Sensor -->
  <g id="block1">
    <rect x="100" y="150" width="250" height="120" fill="#34495E" stroke="#2C3E50" stroke-width="3" rx="10"/>
    <text x="225" y="185" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
      1. HC-SR04 Sensor
    </text>
    <text x="225" y="210" font-size="13" text-anchor="middle" fill="#BDC3C7">
      Ultrasonic Distance Sensor
    </text>
    
    <!-- Sensor icon -->
    <circle cx="195" cy="240" r="15" fill="#95A5A6"/>
    <circle cx="255" cy="240" r="15" fill="#95A5A6"/>
    
    <!-- Output info -->
    <rect x="120" y="285" width="210" height="35" fill="#2C3E50" rx="5"/>
    <text x="225" y="307" font-size="12" font-weight="bold" text-anchor="middle" fill="#FFD700">
      Output: Distance (cm)
    </text>
  </g>
  
  <!-- Arrow 1 -->
  <line x1="350" y1="210" x2="450" y2="210" stroke="#3498DB" stroke-width="4" marker-end="url(#arrowblue)"/>
  <text x="400" y="200" font-size="11" font-weight="bold" fill="#3498DB" text-anchor="middle">
    Raw Distance
  </text>
  <text x="400" y="230" font-size="10" fill="#7f8c8d" text-anchor="middle">
    e.g., 5.2 cm
  </text>
  
  <!-- Block 2: Arduino Processing -->
  <g id="block2">
    <rect x="450" y="150" width="300" height="120" fill="#00979D" stroke="#006064" stroke-width="3" rx="10"/>
    <text x="600" y="185" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
      2. Arduino Nano 33 BLE
    </text>
    <text x="600" y="210" font-size="13" text-anchor="middle" fill="white">
      Microcontroller Processing
    </text>
    
    <!-- Processing steps -->
    <text x="475" y="235" font-size="11" fill="white">â€¢ Read sensor via D9/D10</text>
    <text x="475" y="252" font-size="11" fill="white">â€¢ Calculate distance</text>
    
    <!-- Output info -->
    <rect x="470" y="285" width="260" height="35" fill="#006064" rx="5"/>
    <text x="600" y="307" font-size="12" font-weight="bold" text-anchor="middle" fill="#FFD700">
      Output: Processed Data
    </text>
  </g>
  
  <!-- Arrow 2 -->
  <line x1="600" y1="270" x2="600" y2="370" stroke="#3498DB" stroke-width="4" marker-end="url(#arrowblue)"/>
  <text x="640" y="320" font-size="11" font-weight="bold" fill="#3498DB">
    Continuous
  </text>
  <text x="640" y="335" font-size="11" font-weight="bold" fill="#3498DB">
    Measurements
  </text>
  
  <!-- Block 3: Edge Impulse ML Model -->
  <g id="block3">
    <rect x="400" y="370" width="400" height="160" fill="#9B59B6" stroke="#8E44AD" stroke-width="3" rx="10"/>
    <text x="600" y="405" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
      3. Edge Impulse ML Model
    </text>
    <text x="600" y="430" font-size="13" text-anchor="middle" fill="#E8DAEF">
      Neural Network Inference
    </text>
    
    <!-- ML Process -->
    <rect x="420" y="445" width="160" height="70" fill="#8E44AD" stroke="#7D3C98" stroke-width="2" rx="5"/>
    <text x="500" y="465" font-size="11" font-weight="bold" text-anchor="middle" fill="white">
      Feature Extraction
    </text>
    <text x="500" y="483" font-size="10" text-anchor="middle" fill="#E8DAEF">
      Statistical features
    </text>
    <text x="500" y="498" font-size="10" text-anchor="middle" fill="#E8DAEF">
      from distance data
    </text>
    
    <text x="590" y="480" font-size="18" fill="white">â†’</text>
    
    <rect x="620" y="445" width="160" height="70" fill="#8E44AD" stroke="#7D3C98" stroke-width="2" rx="5"/>
    <text x="700" y="465" font-size="11" font-weight="bold" text-anchor="middle" fill="white">
      Classification
    </text>
    <text x="700" y="483" font-size="10" text-anchor="middle" fill="#E8DAEF">
      Neural network
    </text>
    <text x="700" y="498" font-size="10" text-anchor="middle" fill="#E8DAEF">
      prediction
    </text>
  </g>
  
  <!-- Decision Split -->
  <line x1="600" y1="530" x2="600" y2="590" stroke="#3498DB" stroke-width="4" marker-end="url(#arrowblue)"/>
  
  <!-- Diamond Decision -->
  <g id="decision">
    <path d="M 600 590 L 700 650 L 600 710 L 500 650 Z" fill="#F39C12" stroke="#E67E22" stroke-width="3"/>
    <text x="600" y="645" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      ML Output
    </text>
    <text x="600" y="665" font-size="12" text-anchor="middle" fill="white">
      Classification
    </text>
  </g>
  
  <!-- Left path: glass_full -->
  <g id="path-full">
    <line x1="500" y1="650" x2="300" y2="650" stroke="#27AE60" stroke-width="4" marker-end="url(#arrowgreen)"/>
    <text x="400" y="640" font-size="12" font-weight="bold" fill="#27AE60" text-anchor="middle">
      glass_full
    </text>
    
    <!-- Block 4a: Buzzer ON -->
    <rect x="50" y="600" width="250" height="100" fill="#27AE60" stroke="#229954" stroke-width="3" rx="10"/>
    <text x="175" y="635" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
      4. Buzzer: ON
    </text>
    <text x="175" y="660" font-size="13" text-anchor="middle" fill="white">
      Alert Activated
    </text>
    <text x="175" y="685" font-size="24" text-anchor="middle">ðŸ”Š</text>
  </g>
  
  <!-- Right path: glass_not_full -->
  <g id="path-not-full">
    <line x1="700" y1="650" x2="900" y2="650" stroke="#E74C3C" stroke-width="4" marker-end="url(#arrowred)"/>
    <text x="800" y="640" font-size="12" font-weight="bold" fill="#E74C3C" text-anchor="middle">
      glass_not_full
    </text>
    
    <!-- Block 4b: Buzzer OFF -->
    <rect x="900" y="600" width="250" height="100" fill="#95A5A6" stroke="#7F8C8D" stroke-width="3" rx="10"/>
    <text x="1025" y="635" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
      4. Buzzer: OFF
    </text>
    <text x="1025" y="660" font-size="13" text-anchor="middle" fill="white">
      No Alert
    </text>
    <text x="1025" y="685" font-size="24" text-anchor="middle">ðŸ”‡</text>
  </g>
  
  <!-- System Details Box -->
  <g id="details">
    <rect x="50" y="760" width="380" height="210" fill="white" stroke="#3498DB" stroke-width="3" rx="8"/>
    <text x="240" y="790" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">
      ðŸ“‹ System Components Detail
    </text>
    
    <text x="70" y="820" font-size="12" font-weight="bold" fill="#34495E">
      1. Sensor Layer
    </text>
    <text x="90" y="840" font-size="11" fill="#555">
      â€¢ HC-SR04 measures distance continuously
    </text>
    <text x="90" y="855" font-size="11" fill="#555">
      â€¢ Updates every 100ms (10 Hz sampling)
    </text>
    
    <text x="70" y="880" font-size="12" font-weight="bold" fill="#00979D">
      2. Processing Layer
    </text>
    <text x="90" y="900" font-size="11" fill="#555">
      â€¢ Arduino reads via digital pins
    </text>
    <text x="90" y="915" font-size="11" fill="#555">
      â€¢ Voltage divider protects 3.3V logic
    </text>
    
    <text x="70" y="940" font-size="12" font-weight="bold" fill="#9B59B6">
      3. ML Inference Layer
    </text>
    <text x="90" y="960" font-size="11" fill="#555">
      â€¢ Trained model runs on Arduino
    </text>
  </g>
  
  <!-- ML Training Info -->
  <g id="ml-info">
    <rect x="470" y="760" width="350" height="210" fill="#FFF3CD" stroke="#FFC107" stroke-width="3" rx="8"/>
    <text x="645" y="790" font-size="16" font-weight="bold" text-anchor="middle" fill="#856404">
      ðŸ¤– Machine Learning Details
    </text>
    
    <text x="490" y="820" font-size="12" font-weight="bold" fill="#856404">
      Training Data:
    </text>
    <text x="510" y="840" font-size="11" fill="#856404">
      â€¢ Class 1: 50-100 samples at 3-6cm
    </text>
    <text x="510" y="855" font-size="11" fill="#856404">
      â€¢ Class 2: 50-100 samples at 8-12cm
    </text>
    
    <text x="490" y="880" font-size="12" font-weight="bold" fill="#856404">
      Model Architecture:
    </text>
    <text x="510" y="900" font-size="11" fill="#856404">
      â€¢ Input: Distance time series
    </text>
    <text x="510" y="915" font-size="11" fill="#856404">
      â€¢ Features: Mean, StdDev, Min, Max
    </text>
    <text x="510" y="930" font-size="11" fill="#856404">
      â€¢ Output: 2 classes (full/not full)
    </text>
    
    <text x="490" y="955" font-size="12" font-weight="bold" fill="#856404">
      Deployment:
    </text>
    <text x="510" y="975" font-size="11" fill="#856404">
      â€¢ Compiled to Arduino library
    </text>
  </g>
  
  <!-- Performance Specs -->
  <g id="performance">
    <rect x="860" y="760" width="290" height="210" fill="white" stroke="#27AE60" stroke-width="3" rx="8"/>
    <text x="1005" y="790" font-size="16" font-weight="bold" text-anchor="middle" fill="#27AE60">
      âš¡ Performance Metrics
    </text>
    
    <text x="880" y="820" font-size="12" font-weight="bold" fill="#2C3E50">
      Speed:
    </text>
    <text x="900" y="840" font-size="11" fill="#555">
      â€¢ Inference: ~10-20ms
    </text>
    <text x="900" y="855" font-size="11" fill="#555">
      â€¢ Response time: &lt;100ms
    </text>
    
    <text x="880" y="880" font-size="12" font-weight="bold" fill="#2C3E50">
      Accuracy:
    </text>
    <text x="900" y="900" font-size="11" fill="#555">
      â€¢ Target: &gt;95%
    </text>
    <text x="900" y="915" font-size="11" fill="#555">
      â€¢ Real-time classification
    </text>
    
    <text x="880" y="940" font-size="12" font-weight="bold" fill="#2C3E50">
      Power:
    </text>
    <text x="900" y="960" font-size="11" fill="#555">
      â€¢ USB powered (5V)
    </text>
    <text x="900" y="975" font-size="11" fill="#555">
      â€¢ Low power consumption
    </text>
  </g>
  
  <!-- Workflow arrow annotation -->
  <text x="900" y="120" font-size="13" font-style="italic" fill="#7f8c8d">
    Complete workflow cycle: ~100-200ms
  </text>
  
  <!-- System loop indicator -->
  <path d="M 750 210 Q 850 210, 850 300 Q 850 350, 750 370" 
        stroke="#95A5A6" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  <text x="870" y="290" font-size="10" fill="#95A5A6">
    Continuous
  </text>
  <text x="870" y="305" font-size="10" fill="#95A5A6">
    Monitoring
  </text>
</svg>